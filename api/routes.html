<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Routing from JavaScript</title>
  <meta name="description" content="A web framework in Node.js">

  
  
  <link rel="stylesheet" href="https://artofcode-.github.io/nails/assets/style.css">

  <link rel="canonical" href="https://artofcode-.github.io/nails/api/routes.html">
  <link rel="alternate" type="application/rss+xml" title="nails" href="https://artofcode-.github.io/nails/feed.xml">

  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" charset="utf-8"></script>
  <script src="https://artofcode-.github.io/nails/assets/script.js"></script>
</head>


  <body>

    <header class="border-bottom-thick px-2 clearfix">
  <div class="left sm-width-full py-1 mt-1 mt-lg-0">
    <a class="align-middle link-primary text-accent" href="/nails/">
      nails
    </a>
  </div>
  <div class="right sm-width-full">
    <ul class="list-reset mt-lg-1 mb-2 mb-lg-1">
      
        
        <li class="inline-block">
          <a class="align-middle link-primary mr-2 mr-lg-0 ml-lg-2" href="/nails/api/config.html">
            Config
          </a>
        </li>
        
      
        
        <li class="inline-block">
          <a class="align-middle link-primary mr-2 mr-lg-0 ml-lg-2" href="/nails/api/controllers.html">
            Controllers
          </a>
        </li>
        
      
        
        <li class="inline-block">
          <a class="align-middle link-primary mr-2 mr-lg-0 ml-lg-2" href="/nails/getting-started.html">
            Getting Started
          </a>
        </li>
        
      
        
        <li class="inline-block">
          <a class="align-middle link-primary mr-2 mr-lg-0 ml-lg-2" href="/nails/api/">
            API
          </a>
        </li>
        
      
        
      
        
        <li class="inline-block">
          <a class="align-middle link-primary mr-2 mr-lg-0 ml-lg-2" href="/nails/api/routes.html">
            Routing from JavaScript
          </a>
        </li>
        
      
        
      
        
      
        
        <li class="inline-block">
          <a class="align-middle link-primary mr-2 mr-lg-0 ml-lg-2" href="/nails/api/ws.html">
            WebSockets
          </a>
        </li>
        
      
    </ul>
  </div>
</header>


    <div>
      <article class="container mx-auto px-2 mt2 mb4">
  <header>
    <h1 class="h0 py-4 mt-3">Routing from JavaScript</h1>
  </header>
  <div class="col-4 sm-width-full border-top-thin">
  </div>
  <div class="prose mb-4 py-4">
    <p>Nails provides a handy library that lets you create routes with pure JS.</p>

<p>To use this library:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'node-nails'</span><span class="p">);</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Router</span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">router</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// define your routes here</span>
<span class="p">})</span>
</code></pre></div>
<p>The <code>router</code> object passed to the function (itâ€™s also the <code>this</code> value if you use a regular function) has several methods to help you create routes:</p>

<ul>
<li><code>request(<em>method</em>, <em>path</em>, <em>options</em>)</code>

<ul>
<li><em><code>method</code></em>: a valid HTTP verb</li>
<li><em><code>path</code></em>: the path to match</li>
<li><em><code>options</code></em>: an object of other options</li>
<li><em><code>to</code></em>: the controller to render (default: <em><code>path</code></em>)</li>
</ul></li>
<li><code><em>method</em>(<em>path</em>[, <em>to</em>][, <em>options</em>])</code>

<ul>
<li><em><code>method</code></em>: a valid lowercase HTTP verb</li>
<li><em><code>path</code></em>: the path to match</li>
<li><em><code>to</code></em>: the controller to render</li>
<li><em><code>options</code></em>: an object of other options</li>
</ul></li>
<li><p><code>scope(<em>scope</em>, <em>function</em>)</code></p>

<ul>
<li><em><code>scope</code></em>: the scope component to add</li>
<li><em><code>function</code></em>: the function to call in this scope. The function is passed the router as its first argument and <code>this</code> value.</li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">scope</span><span class="p">(</span><span class="s1">'status'</span><span class="p">,</span> <span class="p">({</span> <span class="nx">get</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">get</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="s1">'index'</span><span class="p">)</span> <span class="c1">// matches /status, routes to status.index</span>
<span class="p">})</span>
</code></pre></div>
<p>is equivalent to:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">get</span><span class="p">(</span><span class="s1">'status'</span><span class="p">,</span> <span class="s1">'status.index'</span><span class="p">)</span>
</code></pre></div></li>
</ul>

<h1>Routes as JSON</h1>

<h3>Format</h3>

<p>The routes file can be either JavaScript or JSON (or CoffeeScript, with a call to <code>require(&#39;coffee-script/register&#39;)</code>). The JSON variant should be formatted as one top level <em>array</em> containing any number of route <em>objects</em>; the script variants should <em>export</em> an equivalent array. The JavaScript helper above can be used to dynamically generate this file to prevent errors.</p>

<h3>Required Keys</h3>

<p>In <em>each</em> route object, the following keys are <strong>required</strong>:</p>

<ul>
<li><strong><code>type</code></strong> <em>(type: <code>String</code>)</em><br>
Defines the HTTP method that this route will respond to. Must be one of <code>HEAD</code>, <code>OPTIONS</code>, <code>GET</code>, <code>POST</code>, <code>PATCH</code>,
<code>PUT</code>, or <code>DELETE</code>.</li>
<li><strong><code>url</code></strong> <em>(type: <code>String</code>)</em><br>
Defines the pathname component of the URL (after the host and before the query) that this route will respond to. A
<code>url</code> of <code>/status</code> will respond to <code>/status</code> and to <code>/status?query=xyz</code>, but not to <code>/status/json</code>. This can use express-style <code>:</code> variables (<code>/a/:b</code> will set <code>this.params.b</code> in the controller).</li>
<li><strong><code>to</code></strong> <em>(type: <code>String</code>)</em><br>
Defines the controller and function that will handle requests that match this route. Must be provided in the format
<code>controller.function</code>: for a route handled by the <code>index</code> function in the <code>status</code> controller, the value of this key
should be <code>status.index</code>.</li>
</ul>

<h3>Example File</h3>

<p><strong>JSON:</strong></p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/status"</span><span class="p">,</span><span class="w"> </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status.index"</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/status/new"</span><span class="p">,</span><span class="w"> </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status.new"</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w"> </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/status/new"</span><span class="p">,</span><span class="w"> </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status.create"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>JavaScript:</strong></p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span> <span class="na">url</span><span class="p">:</span> <span class="s2">"/status"</span><span class="p">,</span> <span class="na">to</span><span class="p">:</span> <span class="s2">"status.index"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span> <span class="na">url</span><span class="p">:</span> <span class="s2">"/status/new"</span><span class="p">,</span> <span class="na">to</span><span class="p">:</span> <span class="s2">"status.new"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span> <span class="na">url</span><span class="p">:</span> <span class="s2">"/status/new"</span><span class="p">,</span> <span class="na">to</span><span class="p">:</span> <span class="s2">"status.create"</span> <span class="p">}</span>
<span class="p">];</span>
</code></pre></div>
  </div>
</article>

    </div>

    <div class="border-top-thin clearfix mt-2 mt-lg-4">
  <div class="container mx-auto px-2">
    <p class="col-8 sm-width-full left py-2 mb-0">This project is maintained by <a class="text-accent" href="https://github.com/ArtOfCode-">ArtOfCode</a> and <a href="https://github.com/j-f1">J F</a>.</p>
    <ul class="list-reset right clearfix sm-width-full py-2 mb-2 mb-lg-0">
      <!-- <li class="inline-block mr-1">
        <a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="nails">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </li> -->
      <li class="inline-block">
        <a class="github-button" href="https://github.com/ArtOfCode-/nails" data-icon="octicon-star" data-count-href="ArtOfCode-//stargazers" data-count-api="/repos/ArtOfCode-/#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star ArtOfCode-/ on GitHub">Star</a>
      </li>
    </ul>
  </div>
</div>


  </body>

</html>
